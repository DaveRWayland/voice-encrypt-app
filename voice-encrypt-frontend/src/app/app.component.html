<!-- Contenedor principal con fondo oscuro -->
<!DOCTYPE html>
<div class="app-container">
  <!-- Fondo animado con partículas -->
  <div class="background-animation">
    <div
      class="particle"
      *ngFor="let p of particles"
      [style.left.%]="p.left"
      [style.top.%]="p.top"
      [style.animationDelay]="p.delay + 's'"
      [style.animationDuration]="p.duration + 's'"
    ></div>
  </div>

  <!-- Contenido principal -->
  <div class="content-wrapper">
    <!-- Tarjeta principal -->
    <div class="main-card">
      <div class="main-image-container">
        <img
          class="main-image"
          src="../assets/images/happy_clients.png"
          alt=""
        />
      </div>
      <div class="title-container">
        <h1 class="title">¡Te damos la bienvenida a Banco Azteca!</h1>
        <h2 class="subtitle">
          Usa tu préstamo como dinero en efectivo o compra en donde quieras.
        </h2>
      </div>
      <!-- Input de texto (inhabilitado) -->
      <div class="input-container">
        <label class="input-label"> ¿Como prefieres que te llamemos? </label>
        <input
          type="text"
          class="voice-input"
          [value]="recognizedText"
          placeholder="Escribe tu nombre"
          [class.has-text]="recognizedText"
          [(ngModel)]="recognizedText"
        />
        <div class="input-decoration"></div>
      </div>

      <!-- Botón de micrófono principal -->
      <div class="mic-button-container">
        <button
          class="mic-button"
          [class.listening]="isListening"
          [class.disabled]="!isSpeechSupported"
          (click)="toggleVoiceRecognition()"
          [disabled]="!isSpeechSupported"
        >
          <div class="mic-button-glow"></div>
          <div class="mic-icon-container">
            <!-- Icono de micrófono -->
            <svg
              *ngIf="!isListening"
              class="mic-icon"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 1C10.3431 1 9 2.34315 9 4V12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12V4C15 2.34315 13.6569 1 12 1Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M19 10V12C19 15.866 15.866 19 12 19C8.13401 19 5 15.866 5 12V10"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12 19V23"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M8 23H16"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>

            <!-- Icono de parar -->
            <svg
              *ngIf="isListening"
              class="mic-icon stop-icon"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="6"
                y="6"
                width="12"
                height="12"
                rx="2"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
        </button>
        <!-- Visualizador de ondas de audio -->
        <div class="audio-visualizer" [class.active]="isListening">
          <div class="wave"></div>
          <div class="wave"></div>
          <div class="wave"></div>
          <div class="wave"></div>
          <div class="wave"></div>
        </div>
        <!-- Botones de acción -->
        <div class="action-buttons" *ngIf="recognizedText">
          <!-- Botón de encriptar -->
          <button
            class="action-button primary"
            (click)="encryptText()"
            [disabled]="isProcessing"
          >
            <svg
              class="button-icon"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="5"
                y="11"
                width="14"
                height="10"
                rx="2"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M12 15V17"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M7 11V7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7V11"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
            <span>{{ isProcessing ? "Encriptando..." : "Encriptar" }}</span>
          </button>

          <!-- Botón de reiniciar -->
          <button class="action-button secondary" (click)="reset()">
            <svg
              class="button-icon"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M12 6V12L16 16"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
            <span>Reiniciar</span>
          </button>
        </div>

        <!-- Mensaje de éxito -->
        <div class="success-message" *ngIf="showSuccess" @fadeIn>
          <svg
            class="success-icon"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20 6L9 17L4 12"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <span>¡Texto encriptado exitosamente!</span>
        </div>

        <!-- Mensaje de error -->
        <div class="error-message" *ngIf="error">
          <svg
            class="error-icon"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="2"
            />
            <path
              d="M12 8V12"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <circle cx="12" cy="16" r="1" fill="currentColor" />
          </svg>
          <span>{{ error }}</span>
        </div>

        <!-- Resultado encriptado -->
        <div class="result-container" *ngIf="encryptedText">
          <h3 class="result-title">Texto Encriptado</h3>
          <div class="result-box encrypted">
            <code class="result-text">{{ encryptedText }}</code>
            <button
              class="copy-button"
              (click)="copyToClipboard(encryptedText)"
              title="Copiar"
            >
              <svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <rect
                  x="9"
                  y="9"
                  width="13"
                  height="13"
                  rx="2"
                  stroke="currentColor"
                  stroke-width="2"
                />
                <path
                  d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"
                  stroke="currentColor"
                  stroke-width="2"
                />
              </svg>
            </button>
          </div>

          <!-- Botón de desencriptar -->
          <button
            class="action-button decrypt-button"
            (click)="decryptText()"
            [disabled]="isProcessing"
          >
            <svg
              class="button-icon"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="5"
                y="11"
                width="14"
                height="10"
                rx="2"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M12 15V17"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M7 11V9C7 8.20435 7.31607 7.44129 7.87868 6.87868C8.44129 6.31607 9.20435 6 10 6H14C14.7956 6 15.5587 6.31607 16.1213 6.87868C16.6839 7.44129 17 8.20435 17 9"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
            <span>Desencriptar</span>
          </button>

          <!-- Resultado desencriptado -->
          <div class="result-box decrypted" *ngIf="showDecrypted">
            <div class="decrypted-label">Texto Original:</div>
            <code class="result-text success">{{ decryptedText }}</code>
            <div class="success-badge">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M20 6L9 17L4 12"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Verificado
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer con info técnica -->
    <div class="tech-author">
      <div class="tech-badge">
        <span class="tech-icon">🤓</span>
        <span>DAVID RAYGOZA</span>
      </div>
      <div class="tech-badge">
        <span class="tech-icon">🔒</span>
        <span>PKCS1</span>
      </div>
      <div class="tech-badge">
        <span class="tech-icon">🟢</span>
        <span>NODE | EXPRESS</span>
        <span class="tech-icon">⚡</span>
      </div>
      <div class="tech-badge">
        <span class="tech-icon">🅰️</span>
        <span>ANGULAR | SPEECH</span>
        <span class="tech-icon">🎙️</span>
      </div>
    </div>
  </div>
</div>
